<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AAX SDK: Description callback</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.1</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="modules.html"><span>Manual</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Lists</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Description callback<div class="ingroups"><a class="el" href="a00323.html">AAX SDK Manual</a> &raquo; <a class="el" href="a00325.html">Core AAX Interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader"> </h2>
<p>Static configuration for an AAX plug-in. </p>
<h1><a class="anchor" id="describe_contents"></a>
On this page</h1>
<ul>
<li><a class="el" href="a00326.html#describe_about">About the Describe callback and AAX descriptor interfaces</a> </li>
<li><a class="el" href="a00326.html#describe_collection">Top level: Collection</a> </li>
<li><a class="el" href="a00326.html#describe_effects">Middle level: Effects</a> </li>
<li><a class="el" href="a00326.html#describe_component">Lowest level: Algorithm components</a> </li>
<li><a class="el" href="a00326.html#describe_checking_results">Checking Results</a> </li>
<li><a class="el" href="a00326.html#describe_validation">Describe Validation</a> </li>
<li><a class="el" href="a00326.html#describe_additionaltopics">Additional Topics</a></li>
</ul>
<div class="section"> </div><h1><a class="anchor" id="describe_about"></a>
About the Describe callback and AAX descriptor interfaces</h1>
<div class="section"> <div class="dotgraph">
<img class="centered" src="dot_aax_desc_interfaces.png" alt="dot_aax_desc_interfaces.png" border="0" usemap="#dot_aax_desc_interfaces.map"/>
<map name="dot_aax_desc_interfaces.map" id="dot_aax_desc_interfaces.map"><area shape="poly" id="node1" href="a00326.html#ga83d05333118598c179ca6d89487fa203" title="GetEffectDescriptions()" alt="" coords="115,53,150,52,179,48,198,42,206,35,202,27,189,20,171,14,148,9,124,6,99,5,75,7,52,11,31,17,15,24,6,31,8,39,21,45,45,50,78,53"/><area shape="rect" id="node2_0" href="a00087.html" title="AAX_ICollection" alt="" coords="52,80,160,105"/><area shape="rect" id="node2_1" href="a00087.html#afab70588134a065a5b4d6ea6ddd5ddff" title="AAX_ICollection" alt="" coords="52,105,160,131"/><area shape="rect" id="node2_2" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c" title="AAX_ICollection" alt="" coords="52,131,160,156"/><area shape="rect" id="node2" title="AAX_ICollection" alt="" coords="50,78,161,157"/><area shape="rect" id="node3_3" href="a00096.html" title="AAX_IEffectDescriptor" alt="" coords="279,132,455,157"/><area shape="rect" id="node3_4" href="a00096.html#a2102ea4391f5b60e4d5e860a997383e4" title="AAX_IEffectDescriptor" alt="" coords="279,157,455,183"/><area shape="rect" id="node3_5" href="a00096.html#aec33938f50461dd5e7c1dcc25faf6917" title="AAX_IEffectDescriptor" alt="" coords="279,183,455,208"/><area shape="rect" id="node3_6" href="a00096.html#ac90c1b595d65259f798429474bbe926f" title="AAX_IEffectDescriptor" alt="" coords="279,208,455,233"/><area shape="rect" id="node3_7" href="a00096.html#ac57ed8597814db525eb69a2d2bfd9d87" title="AAX_IEffectDescriptor" alt="" coords="279,233,455,259"/><area shape="rect" id="node3_8" href="a00096.html#a7b89727b793c1b57a3815e59868c2713" title="AAX_IEffectDescriptor" alt="" coords="279,259,455,284"/><area shape="rect" id="node3" title="AAX_IEffectDescriptor" alt="" coords="278,131,457,285"/><area shape="rect" id="node4_9" href="a00088.html" title="AAX_IComponentDescriptor" alt="" coords="530,183,722,208"/><area shape="rect" id="node4_10" href="a00088.html#a0d7dd21daa8bc588d6a1145c3eb7ef98" title="AAX_IComponentDescriptor" alt="" coords="530,208,722,233"/><area shape="rect" id="node4_11" href="a00088.html#a1c069508cf54a523905c8160ebf628ad" title="AAX_IComponentDescriptor" alt="" coords="530,233,722,259"/><area shape="rect" id="node4_12" href="a00088.html#aa8443e720e48046444a2e9f712f0864b" title="AAX_IComponentDescriptor" alt="" coords="530,259,722,284"/><area shape="rect" id="node4" title="AAX_IComponentDescriptor" alt="" coords="529,181,723,285"/><area shape="rect" id="node5_13" href="a00112.html" title="AAX_IPropertyMap" alt="" coords="301,309,435,337"/><area shape="rect" id="node5_14" href="a00112.html" title="AAX_IPropertyMap" alt="" coords="301,348,435,376"/><area shape="rect" id="node5" title="AAX_IPropertyMap" alt="" coords="300,309,435,376"/><area shape="rect" id="node6_15" href="a00112.html" title="AAX_IPropertyMap" alt="" coords="559,309,694,337"/><area shape="rect" id="node6_16" href="a00112.html" title="AAX_IPropertyMap" alt="" coords="559,348,694,376"/><area shape="rect" id="node6" title="AAX_IPropertyMap" alt="" coords="559,309,693,376"/></map>
</div>
</div><div class="section"> In Describe, a plug-in declares its static (or default) configuration and any properties that the host will need in order to manage the plug-in.</div><div class="section"> A plug-in's Describe callback ties the Algorithm, GUI, and Data Model together. In this callback, the plug-in provides a description of its algorithm callbacks, data connections, and other static plug-in properties using a set of host-provided description interfaces. The plug-in uses a tiered hierarchy of these description interfaces to complete its description: </p><ul>
<li class="Bullet">
At the top level, a single Collection interface represents properties that apply to the plug-in binary.  </li>
<li class="Bullet">
The Collection interface is populated with one or more Effect descriptors, each of which represents a single kind of effect. For example, a single dynamics plug-in binary may include both single-band and multi-band Effects. Each Effect represents a different plug-in "product" available to users.  </li>
<li class="Bullet">
Each Effect is registered with a set of one or more algorithm components that represent the specific processing configurations (e.g. stem formats, sample rates) that the plug-in supports. The set of components in a single Effect provide possible variations of the single plug-in "product", and as such these variations are mostly transparent to users.  </li>
</ul>
</div><div class="section"> The actual description callback entrypoint is <a class="el" href="a00209.html#aa455fa4d9a2236334d0fd959b4919788">ACFRegisterPlugin()</a>, which is declared in <a class="el" href="a00209.html">AAX_Exports.cpp</a>. This method is implemented inside of the AAX Library, where it calls the plug-in's custom implementation of the <a class="el" href="a00326.html#gae0d356eef326f77cbb972e48946d4892">GetEffectDescriptions()</a> callback.</div><div class="section"><div class="fragment"><div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><span class="comment">// ROUTINE: GetEffectDescriptions</span></div>
<div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> <a class="code" href="a00326.html#gae0d356eef326f77cbb972e48946d4892">GetEffectDescriptions</a>( <a class="code" href="a00087.html">AAX_ICollection</a> * outCollection )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>              result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="a00096.html">AAX_IEffectDescriptor</a> * plugInDescriptor = outCollection-&gt;<a class="code" href="a00087.html#afab70588134a065a5b4d6ea6ddd5ddff">NewDescriptor</a>();</div>
<div class="line">    <span class="keywordflow">if</span> ( plugInDescriptor )</div>
<div class="line">    {</div>
<div class="line">        result = DemoGain_GetPlugInDescription( plugInDescriptor );</div>
<div class="line">        <span class="keywordflow">if</span> ( result == <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> )</div>
<div class="line">            outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( kEffectID_DemoGain, plugInDescriptor );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937a647cce13fa531e3a46c6eab694048a9c">AAX_ERROR_NULL_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#a7fbeab9630460b9bf4525512609855f0">SetManufacturerName</a>( <span class="stringliteral">&quot;Avid, Inc.&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DemoGain Plug-In&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DemoGain&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DmGi&quot;</span> );        </div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#a4e69ac93eaac9c285c2bc3ac5b25880b">SetPackageVersion</a>( 1 );      </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption"><a class="el" href="a00326.html#gae0d356eef326f77cbb972e48946d4892" title="The plug-in&#39;s static Description entrypoint. ">GetEffectDescriptions()</a> from the DemoGain example plug-in</div></div><div class="section"> In general, the following procedure is used when describing an AAX plug-in: </p><ol>
<li class="List">
Create an Effect description interface from the Collection interface provided by the host  </li>
<li class="List">
Use the Effect description interface to create references to one or more component description interfaces.  </li>
<li class="List">
Describe each algorithm component by populating the component descriptions.  </li>
<li class="List">
Add the components to the Effect description </li>
<li class="List">
Add additional modules and properties to the Effect description.  </li>
<li class="List">
Add the completed Effect to the Collection  </li>
<li class="List">
Repeat for any additional Effects included in the plug-in binary.  </li>
<li class="List">
Return the completed Collection interface to the host and exit.  </li>
</ol>
</div><div class="section"> <dl class="section note"><dt>Note</dt><dd>The host owns all memory associated with any descriptors that the plug-in returns via this callback.</dd></dl>
</div><div class="section"> </div><h1><a class="anchor" id="describe_collection"></a>
Top level: Collection</h1>
<div class="section"> The <a class="el" href="a00087.html">AAX_ICollection</a> interface provides a creation function (<a class="el" href="a00087.html#afab70588134a065a5b4d6ea6ddd5ddff">AAX_ICollection::NewDescriptor()</a>) for new plug-in descriptors, which in turn provides access to the various interfaces necessary for describing a plug-in (see the <code>DemoGain_GetPlugInDescription()</code> and <code>DescribeAlgorithmComponent()</code> listings below).</div><div class="section"> When a plug-in description is complete, it is added to the collection via the <a class="el" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AAX_ICollection::AddEffect()</a> method. The <a class="el" href="a00087.html">AAX_ICollection</a> interface also provides some additional description methods that are used to describe the overall plug-in package. These methods can be used to describe the plug-in package's name, the name of the plug-in's manufacturer, and the plug-in package version. Once these have been described, the completed description interface is returned to the host and exits.</div><div class="section"><div class="fragment"><div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><span class="comment">// ROUTINE: GetEffectDescriptions</span></div>
<div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> <a class="code" href="a00326.html#gae0d356eef326f77cbb972e48946d4892">GetEffectDescriptions</a>( <a class="code" href="a00087.html">AAX_ICollection</a> * outCollection )</div>
<div class="line">{</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">    <a class="code" href="a00096.html">AAX_IEffectDescriptor</a> * plugInDescriptor = outCollection-&gt;<a class="code" href="a00087.html#afab70588134a065a5b4d6ea6ddd5ddff">NewDescriptor</a>();</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">        result = DemoGain_GetPlugInDescription( plugInDescriptor );</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">            outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( kEffectID_DemoGain, plugInDescriptor );</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#a7fbeab9630460b9bf4525512609855f0">SetManufacturerName</a>( <span class="stringliteral">&quot;Avid, Inc.&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DemoGain Plug-In&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DemoGain&quot;</span> );</div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#acf7410e0d06cf64bea36bf7d18b3456c">AddPackageName</a>( <span class="stringliteral">&quot;DmGi&quot;</span> );        </div>
<div class="line">    outCollection-&gt;<a class="code" href="a00087.html#a4e69ac93eaac9c285c2bc3ac5b25880b">SetPackageVersion</a>( 1 );      </div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Populating the <a class="el" href="a00087.html" title="Interface to represent a plug-in binary&#39;s static description. ">AAX_ICollection</a> interface</div></div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="describe_effects"></a>
Middle level: Effects</h1>
<div class="section"> The <a class="el" href="a00096.html">AAX_IEffectDescriptor</a> interface provides description methods that are used to describe the Effect, such as its name, category, associated page table, and, importantly, creation methods for its data model, GUI, and other AAX modules.</div><div class="section"><div class="fragment"><div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><span class="comment">// ROUTINE: DemoGain_GetPlugInDescription</span></div>
<div class="line"><span class="comment">// ***************************************************************************</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> DemoGain_GetPlugInDescription( <a class="code" href="a00096.html">AAX_IEffectDescriptor</a> * outDescriptor )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span>                         err;</div>
<div class="line">    <a class="code" href="a00088.html">AAX_IComponentDescriptor</a> *  compDesc = outDescriptor-&gt;<a class="code" href="a00096.html#a2102ea4391f5b60e4d5e860a997383e4">NewComponentDescriptor</a> ();</div>
<div class="line">    <span class="keywordflow">if</span> ( !compDesc )</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937a647cce13fa531e3a46c6eab694048a9c">AAX_ERROR_NULL_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Add empty component descriptors to the host, register a processing</span></div>
<div class="line">    <span class="comment">// entrypoint for each, and populate with description information. </span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Alg component</span></div>
<div class="line">    DescribeAlgorithmComponent( compDesc );</div>
<div class="line">    err = outDescriptor-&gt;<a class="code" href="a00096.html#aec33938f50461dd5e7c1dcc25faf6917">AddComponent</a>( compDesc ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line"></div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;Demo Gain AAX&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;Demo Gain&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;DemoGain&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;DmGain&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;DGpr&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInName ( <span class="stringliteral">&quot;Dn&quot;</span> );</div>
<div class="line">    outDescriptor-&gt;AddPlugInCategory ( <a class="code" href="a00206.html#aef9637518fb1ac0e2f403444c73aba4aa1e8d5202983c58aa0346a9a547f55bd9">AAX_ePlugInCategory_Dynamics</a> );</div>
<div class="line">    outDescriptor-&gt;<a class="code" href="a00096.html#ad1a286ef7cb869e6f79423dd774ec976">AddProcPtr</a>( (<span class="keywordtype">void</span> *) DemoGain_Parameters::Create, <a class="code" href="a00163.html#af0682195d377392ad356fd2b00c36892a86aab4af036f1087b4f31bbac234ac3d">kAAX_ProcPtrID_Create_EffectParameters</a> );</div>
<div class="line">    outDescriptor-&gt;<a class="code" href="a00096.html#a3326bd8e29690a352408539029a50a61">AddResourceInfo</a> ( <a class="code" href="a00206.html#ae2805e88175d975589153a04e42898bbab0028d7fb45564dc4afa0f0a50296043">AAX_eResourceType_PageTable</a>, <span class="stringliteral">&quot;DemoGainPages.xml&quot;</span> );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if PLUGGUI != 0</span></div>
<div class="line">    outDescriptor-&gt;<a class="code" href="a00096.html#ad1a286ef7cb869e6f79423dd774ec976">AddProcPtr</a>( (<span class="keywordtype">void</span> *) DemoGain_GUI::Create, <a class="code" href="a00163.html#af0682195d377392ad356fd2b00c36892a102df0cf99f7423a7997dd283eed7a88">kAAX_ProcPtrID_Create_EffectGUI</a> );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Populating an <a class="el" href="a00096.html" title="Description interface for an effect&#39;s (plug-in type&#39;s) components. ">AAX_IEffectDescriptor</a> interface</div></div><div class="section"> All components in an Effect must share the same AAX modules; for example, it is not possible to use one data model definition for one sample rate and another data model definition for a different sample rate. Therefore, a plug-in's AAX modules are defined in its Effect description.</div><div class="section"></div><h2><a class="anchor" id="describe_effects_multiple"></a>
Registering multiple Effects</h2>
<div class="section"> A single plug-in package may include multiple Effects, which are added in turn in the description method. Once these connections are made, Describe passes the host a populated description interface and returns.</div><div class="section"> For example, consider an EQ plug-in that contains both one-band and four-band variations, each of which the user should see as a distinct plug-in. These Effects would be described and added separately to the collection object and would appear as separate products to the user.</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> GetEffectsDescriptions ( <a class="code" href="a00087.html">AAX_ICollection</a> * outCollection )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> ;</div>
<div class="line">    <span class="keywordflow">if</span> ( result == <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="a00096.html">AAX_IEffectDescriptor</a> * aDesc1 = outCollection -&gt; NewDescriptor ();</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <span class="comment">// Populate aDesc1 with one - band EQ description</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        result = outCollection -&gt; AddEffect ( kEffectID_MyOneBandEQ , aDesc1 );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ( result == <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="a00096.html">AAX_IEffectDescriptor</a> * aDesc4 = outCollection -&gt; NewDescriptor ();</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <span class="comment">// Populate aDesc4 with four - band EQ description</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        result = outCollection -&gt; AddEffect ( kEffectID_MyFourBandEQ , aDesc4 );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ( result == <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> )</div>
<div class="line">    {</div>
<div class="line">        outCollection -&gt; SetManufacturerName ( <span class="stringliteral">&quot;My Plug -Ins ,  Inc.&quot;</span> );</div>
<div class="line">        outCollection -&gt; AddPackageName ( <span class="stringliteral">&quot; MyEQ  Plug -In&quot;</span> );</div>
<div class="line">        outCollection -&gt; AddPackageName ( <span class="stringliteral">&quot; MyQ&quot;</span> ); <span class="comment">// Short name</span></div>
<div class="line">        outCollection -&gt; SetPackageVersion ( 1 );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result ;</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Registering multiple Effects in a single Collection</div></div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="describe_component"></a>
Lowest level: Algorithm components</h1>
<div class="section"> In order to register an algorithm component, a plug-in must describe the component's external interface. This includes each of the component's ports and any other fields in its context structure, a reference to its processing function entrypoint (its "Process Procedure", or ProcessProc,) and any other special properties that the host should know about.</div><div class="section"> The description of a context structure involves a set of port definitions, which can be "hard-wired" to receive data from the host (such as audio buffers), from the plug-in's data model (such as packets of coefficients), or even from past calls to the algorithm (private, persistent algorithm state). See <a class="el" href="a00327.html">Real-time algorithm callback</a> for more information on an algorithm's context structure.</div><div class="section"><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> DescribeAlgorithmComponent( <a class="code" href="a00088.html">AAX_IComponentDescriptor</a> * outDesc )</div>
<div class="line">{</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">    <a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>                  err;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Subscribe context fields to host-provided services or information</span></div>
<div class="line">    err = outDesc-&gt;AddField ( eAlgFieldID_AudioIn, kAAX_FieldTypeAudioIn ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a>(err == 0);</div>
<div class="line">    err = outDesc-&gt;AddField ( eAlgFieldID_AudioOut, kAAX_FieldTypeAudioOut ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line">    err = outDesc-&gt;AddField ( eAlgFieldID_BufferSize, kAAX_FieldTypeAudioBufferLength ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Register context fields as communications destinations</span></div>
<div class="line">    err = outDesc-&gt;<a class="code" href="a00088.html#a230293b9f6bb413626cd487ca501df75">AddDataInPort</a> ( eAlgPortID_BypassIn, <span class="keyword">sizeof</span> (int32_t) ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line">    err = outDesc-&gt;<a class="code" href="a00088.html#a230293b9f6bb413626cd487ca501df75">AddDataInPort</a> ( eAlgPortID_CoefsGainIn, <span class="keyword">sizeof</span> (SDemoGain_CoefsGain) ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Populating a single <a class="el" href="a00088.html" title="Description interface for an AAX plug-in component. ">AAX_IComponentDescriptor</a> interface</div></div><div class="section"></div><h2><a class="anchor" id="describe_component_properties"></a>
Algorithm callback properties</h2>
<div class="section"> A set of callback properties is required when adding a Process Procedure to an algorithm component. This is done via the <a class="el" href="a00112.html">AAX_IPropertyMap</a> interface. Using distinct property maps, a single component may register multiple versions of its callback. For example, an audio processing component might register mono and stereo callbacks, or Native and TI callbacks, assigning each the applicable property mapping. This allows the host to determine the correct callback to use depending on the environment in which the plug-in is instantiated.</div><div class="section"><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> DescribeAlgorithmComponent( <a class="code" href="a00088.html">AAX_IComponentDescriptor</a> * outDesc )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="a00112.html">AAX_IPropertyMap</a> *          properties = outDesc-&gt;<a class="code" href="a00088.html#a0d7dd21daa8bc588d6a1145c3eb7ef98">NewPropertyMap</a>();</div>
<div class="line">                    .</div>
<div class="line">                    .</div>
<div class="line">                    .       </div>
<div class="line">    properties-&gt;Clear ();</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea996465cca29a2a15291d1c788ac5728c">AAX_eProperty_ManufacturerID</a>, cDemoGain_ManufactureID );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea3a41fcdff5af1a4fd19dcbca7b1ba6f3">AAX_eProperty_ProductID</a>, cDemoGain_ProductID );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249eadebf03028b758123965a8b988fa2df99">AAX_eProperty_InputStemFormat</a>, <a class="code" href="a00206.html#ad8af5ef008b2bd478add9a0acb0a1d85a0cc08ddb9923a4093c820efe84588947">AAX_eStemFormat_Mono</a> );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea211fdc6277e7fa652b5d482e810b0bc9">AAX_eProperty_OutputStemFormat</a>, <a class="code" href="a00206.html#ad8af5ef008b2bd478add9a0acb0a1d85a0cc08ddb9923a4093c820efe84588947">AAX_eStemFormat_Mono</a> );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea6819867a9e86913e59decf318416d755">AAX_eProperty_CanBypass</a>, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Native and AudioSuite versions</span></div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea89ca3dd6e96895cda14976c1b1ceb826">AAX_eProperty_PlugInID_Native</a>, cDemoGain_PlugInID_Native );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ead3344696b8298a8b254add3d039ea927">AAX_eProperty_PlugInID_AudioSuite</a>, cDemoGain_PlugInID_AudioSuite );   <span class="comment">// Since this is a linear plug-in the RTAS version can also be an AudioSuite version.</span></div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea09fbd1cbcae0e86ad81005258dc1b67e">AAX_eProperty_DSP_AudioBufferLength</a>, kAAX_NativeAudioBufferLength_Default);</div>
<div class="line">    err = outDesc-&gt;<a class="code" href="a00088.html#a1c069508cf54a523905c8160ebf628ad">AddProcessProc_Native</a> ( DemoGain_AlgorithmProcessFunction &lt;1, 1, 1&lt;&lt;kAAX_NativeAudioBufferLength_Default&gt;, properties ); <a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a> (err == 0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TI DSP Version</span></div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea75f174df4efbeca86eaada126c1d9214">AAX_eProperty_PlugInID_TI</a>, cDemoGain_PlugInID_TI );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea09fbd1cbcae0e86ad81005258dc1b67e">AAX_eProperty_DSP_AudioBufferLength</a>, <a class="code" href="a00206.html#ab33e0f1ecf04ca4161fa8d8de5845d67ad1a72546e5300b5c64a19e8e41d12e15">AAX_eAudioBufferLengthDSP_Default</a> );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea5d8e5be9f3698a9c67a578c29da66405">AAX_eProperty_TI_InstanceCycleCount</a>, 1055 );</div>
<div class="line">    properties-&gt;<a class="code" href="a00112.html#a0997671afce9a2367662c764c1d055dd">AddProperty</a> ( <a class="code" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea3e5b289333ba49f5a33de40d89fa4ade">AAX_eProperty_TI_SharedCycleCount</a>, 58 );</div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Adding properties to a component description</div></div><div class="section"> AAX does not require that every value in <a class="el" href="a00112.html">AAX_IPropertyMap</a> be assigned by the developer. However, if a specic value is not assigned to one of an element's properties then the element must support any value for that property. For example, if an audio processing component does not provide any stem format properties then the host will assume that the callback will support any stem format.</div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="describe_checking_results"></a>
Checking Results</h1>
<div class="section"></div><h2><a class="anchor" id="describe_checking_results_summary"></a>
Summary</h2>
<div class="section"><ul>
<li>Use <a class="el" href="a00019.html">AAX_CheckedResult</a> to store result values from all method calls in Describe.</li>
<li>Use the <a class="el" href="a00208.html#a8f177823e9388c5163d1b402a9069bce">AAX_SWALLOW</a> and <a class="el" href="a00208.html#aef6db72a3774d079609f94720928cdd6">AAX_SWALLOW_MULT</a> macros to encapsulate independent describe code, such as registration logic for separate Effects or for separate ProcessProc variations within a single Effect.</li>
</ul>
</div><div class="section"></div><h2><a class="anchor" id="describe_checking_results_problem"></a>
The Problem</h2>
<div class="section"> With plain <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> values it can be challenging to properly detect and handle error states. Each description method call returns an <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> to indicate success or failure, and often problems in a plug-in's configuration can be addressed by properly detecting and resolving errors that occur here. However, adding a return value check after ever method and providing conditional logic in the case of a failure is onerous, ugly, and difficult to maintain.</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line">result = descriptor-&gt;SomeMethod();</div>
<div class="line">result = descriptor-&gt;AnotherMethod(); <span class="comment">// oops! might ignore an error</span></div>
</div><!-- fragment --></div><div class="section"><div class="fragment"><div class="line"><span class="comment">// --------------------------------------------------</span></div>
<div class="line"><span class="comment">// Safer, but not a good solution:</span></div>
<div class="line"><span class="comment">// Information about the errors is lost, the</span></div>
<div class="line"><span class="comment">// merged error code is meaningless, and</span></div>
<div class="line"><span class="comment">// debugging to find the location of the</span></div>
<div class="line"><span class="comment">// failure is hard.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">result |= descriptor-&gt;SomeMethod();</div>
<div class="line">result |= descriptor-&gt;AnotherMethod();</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> != result)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// handle the merged error code</span></div>
<div class="line">}</div>
</div><!-- fragment --></div><div class="section"><div class="fragment"><div class="line"><span class="comment">// --------------------------------------------------</span></div>
<div class="line"><span class="comment">// This is also not a good solution:</span></div>
<div class="line"><span class="comment">// There is no actual handling of errors</span></div>
<div class="line"><span class="comment">// (from the SDK example plug-ins)</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">result = descriptor-&gt;SomeMethod();</div>
<div class="line"><a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a>(<a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> == result);</div>
<div class="line">result = descriptor-&gt;AnotherMethod();</div>
<div class="line"><a class="code" href="a00158.html#a168ee44fd7a5485ab50160db36fb2988">AAX_ASSERT</a>(<a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> == result);</div>
</div><!-- fragment --></div><div class="section"><div class="fragment"><div class="line"><span class="comment">// --------------------------------------------------</span></div>
<div class="line"><span class="comment">// This is correct but is too hard</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line">result = descriptor-&gt;SomeMethod();</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> != result) {</div>
<div class="line">  <span class="comment">// logic to handle this error:</span></div>
<div class="line">  <span class="comment">// assert and/or log the failure?</span></div>
<div class="line">  <span class="comment">// return or continue execution?</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">result = descriptor-&gt;AnotherMethod();</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a> != result) {</div>
<div class="line">  <span class="comment">// ditto</span></div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption"><a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> based error checking is awkward</div></div><div class="section"></div><h2><a class="anchor" id="describe_checking_results_solution"></a>
The Solution</h2>
<div class="section"> The <a class="el" href="a00019.html">AAX_CheckedResult</a> class is designed to solve this problem. <a class="el" href="a00019.html">AAX_CheckedResult</a> can be used just like a plain-old-data <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> :</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00019.html">AAX_CheckedResult</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line">result = descriptor-&gt;SomeMethod();</div>
<div class="line">result = descriptor-&gt;AnotherMethod();</div>
</div><!-- fragment --> <div class="fragmentcaption">Simpler result checking with <a class="el" href="a00019.html">AAX_CheckedResult</a></div></div><div class="section"> When a failure is encountered, <a class="el" href="a00019.html">AAX_CheckedResult</a> will:</p><ul>
<li>Store the error value</li>
<li>Log the error using AAX_TRACE_RELEASE</li>
<li>Throw an exception of type <a class="el" href="a00019.html#a36fd71afc6d62993c1dd96e1ca9fcc0e">AAX_CheckedResult::Exception</a></li>
</ul>
</div><div class="section"> To make this safe to use in the Describe routine, the <a class="el" href="a00288.html">AAX</a> Library includes a try/catch block around the call to the plug-in's <code><a class="el" href="a00326.html#gae0d356eef326f77cbb972e48946d4892" title="The plug-in&#39;s static Description entrypoint. ">GetEffectDescriptions()</a></code> routine.</div><div class="section"> <dl class="section warning"><dt>Warning</dt><dd>Do not use <a class="el" href="a00019.html">AAX_CheckedResult</a> anywhere where an exception could escape to the host (<a class="el" href="a00326.html#gae0d356eef326f77cbb972e48946d4892">GetEffectDescriptions()</a> is OK)</dd></dl>
</div><h2><a class="anchor" id="describe_checking_results_handling_errors"></a>
Handling Errors and Managing Control Flow</h2>
<div class="section"> With the basic approach shown above, any error which is encountered will throw an exception which will cancel the plug-in's registration and prevent the plug-in from being shown in the host. However, most errors can be safely handled without canceling the entire plug-in registration.</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00019.html">AAX_CheckedResult</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 1 registration</span></div>
<div class="line">result = DescribeMyEffect1( effect1Descriptor );</div>
<div class="line">result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect1ID, effect1Descriptor );</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 2 registration</span></div>
<div class="line">result = DescribeMyEffect2( effect2Descriptor );</div>
<div class="line">result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect2ID, effect2Descriptor );</div>
</div><!-- fragment --> <div class="fragmentcaption">Example with no error handling</div></div><div class="section"> In this example, a failure when describing either individual effect will prevent the other effect from being registered. Registration of individual ProcessProcs within a single effect, e.g. for different stem formats, is similar.</div><div class="section"> To allow the registration of other effects to proceed in the event of a failure, any exceptions thrown during the registration of one effect should be caught and should only prevent the registration of that individual effect.</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00019.html">AAX_CheckedResult</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 1 registration</span></div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">  result = DescribeMyEffect1( effect1Descriptor );</div>
<div class="line">  result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect1ID, effect1Descriptor );</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code" href="a00147.html">AAX_CheckedResult::Exception</a>&amp; ex) {</div>
<div class="line">  <span class="comment">// log the error using ex.What()</span></div>
<div class="line">  <span class="comment">// swallow the exception and proceed</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 2 registration</span></div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">  result = DescribeMyEffect2( effect2Descriptor );</div>
<div class="line">  result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect2ID, effect2Descriptor );</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code" href="a00147.html">AAX_CheckedResult::Exception</a>&amp; ex) {</div>
<div class="line">  <span class="comment">// ditto</span></div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragmentcaption">Example of error handling with try/catch</div></div><div class="section"> This solves the problem fully, but it is still cumbersome - especially when registering a long list of separate ProcessProc variants!</div><div class="section"> The <a class="el" href="a00208.html#aef6db72a3774d079609f94720928cdd6">AAX_SWALLOW_MULT</a> macro makes it easier to handle errors which are thrown by <a class="el" href="a00019.html">AAX_CheckedResult</a> :</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00019.html">AAX_CheckedResult</a> result = <a class="code" href="a00207.html#a5f8c7439f3a706c4f8315a9609811937aeddbd1bb67e3a66e6af54a4b4a7a57b3">AAX_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 1 registration</span></div>
<div class="line"><a class="code" href="a00208.html#aef6db72a3774d079609f94720928cdd6">AAX_SWALLOW_MULT</a> (</div>
<div class="line">  result = DescribeMyEffect1( effect1Descriptor );</div>
<div class="line">  result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect1ID, effect1Descriptor );</div>
<div class="line">);</div>
<div class="line"></div>
<div class="line"><span class="comment">// effect 2 registration</span></div>
<div class="line"><a class="code" href="a00208.html#aef6db72a3774d079609f94720928cdd6">AAX_SWALLOW_MULT</a> (</div>
<div class="line">  result = DescribeMyEffect2( effect2Descriptor );</div>
<div class="line">  result = outCollection-&gt;<a class="code" href="a00087.html#a5ff114b8c4da2081515186f2faf65c8c">AddEffect</a>( myEffect2ID, effect2Descriptor );</div>
<div class="line">);</div>
</div><!-- fragment --> <div class="fragmentcaption">Example of error handling with <a class="el" href="a00208.html#aef6db72a3774d079609f94720928cdd6">AAX_SWALLOW_MULT</a></div></div><div class="section"> <em class="Bold">Variations</em></p><ul>
<li>For single-line try/catch there is also <a class="el" href="a00208.html#a8f177823e9388c5163d1b402a9069bce">AAX_SWALLOW</a>.</li>
<li>If you need to reference the error value after the exception is caught, use <a class="el" href="a00208.html#a078be92d3d19a5a4b3da2b55ae5ac1c9">AAX_CAPTURE_MULT</a> (multi-line) or <a class="el" href="a00208.html#af9972551e4546e894010f99eade68c94">AAX_CAPTURE</a> (single-line)</li>
<li>If you know that a certain error code is OK and should not throw in a given situation then you can add it as an exception to the <a class="el" href="a00019.html">AAX_CheckedResult</a> object with <a class="el" href="a00019.html#af6c4b10c55e959f5f8424514a3cbb68a">AAX_CheckedResult::AddAcceptedResult()</a>.</li>
</ul>
</div><div class="section"> For examples of <a class="el" href="a00019.html">AAX_CheckedResult</a> in use, see the <a class="el" href="a00376.html#DemoGain_Multichannel">DemoGain_Multichannel</a> and <a class="el" href="a00376.html#DemoGain_UpMixer">DemoGain_UpMixer</a> plug-ins</div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="describe_validation"></a>
Describe Validation</h1>
<div class="section"></div><h2><a class="anchor" id="describe_validation_dsh"></a>
Validation with DSH</h2>
<div class="section"> You can validate your plug-in's Describe routine using the <a class="el" href="a00365.html">DigiShell</a> command-line tool. The validation command is available directly in the aaxh dish and is also available through an AAX Validator test module:</div><div class="section"> <em class="Bold">aaxh dish</em> </p><pre class="fragment">dsh&gt; load_dish aaxh
dsh&gt; loadpi "/quoted/path/without escape chars/MyPlugIn.aaxplugin"
dsh&gt; getdescriptionvalidationinfo 0</pre></div><div class="section"> <em class="Bold">AAX Validator</em> </p><pre class="fragment">dsh&gt; load_dish aaxval
dsh&gt; runtest [test.describe_validation, "/quoted/path/without escape chars/MyPlugIn.aaxplugin"]</pre></div><div class="section"></div><h2><a class="anchor" id="describe_validation_protools"></a>
Validation with Pro Tools</h2>
<div class="section"> Beginning in Pro Tools 12.8.2, developer builds of Pro Tools will also check plug-in describe routines and will present an alert dialog when the plug-in is scanned if any aspect of the plug-in's describe code has failed the validation step.</div><div class="section"> <div class="image">
<img src="describe_validation_error_pro_tools.png"  alt="Describe validation warning in a Pro Tools developer build"/>
</div>
 <div class="imagecaption"> Describe validation warning in a Pro Tools developer build</div></div><div class="section"> The specific kinds of errors which were encountered will be printed to the <a class="el" href="a00364.html">DigiTrace</a> log file:</div><div class="section"><pre class="fragment">13033.502646,00307,0073: ERROR: Unknown target host for the plug-in.
13033.502662,00307,0073: ERROR: PlugInID property is missing for a ProcessProc (process, initialization, or background function).
13033.502734,00307,0e0f: CMN_TRACEASSERT  Sandbox.aaxplugin configuration contains 2 errors. See the DigiTrace log or run the AAX Validator for more info. (0 == numErrors)</pre></div><div class="section"> This check may be suppressed using the following <a class="el" href="a00360.html#aax_pro_tools_guide_06c_digioptions">DigiOption</a>:</div><div class="section"> <code>TestPlugInDescriptions 0</code></div><div class="section"></div><div class="section"> </div><h1><a class="anchor" id="describe_additionaltopics"></a>
Additional Topics</h1>
<div class="section"> <dl class="section see"><dt>See also</dt><dd><a class="el" href="a00337.html">Plug-in meters</a></dd></dl>
</div> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00087.html">AAX_ICollection</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface to represent a plug-in binary's static description.  <a href="a00087.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00088.html">AAX_IComponentDescriptor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description interface for an AAX plug-in component.  <a href="a00088.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00096.html">AAX_IEffectDescriptor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description interface for an effect's (plug-in type's) components.  <a href="a00096.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00112.html">AAX_IPropertyMap</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic plug-in description property map.  <a href="a00112.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga83d05333118598c179ca6d89487fa203"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#ga83d05333118598c179ca6d89487fa203">AAXRegisterPlugin</a> (<a class="el" href="a00146.html">IACFUnknown</a> *pUnkHost, IACFPluginDefinition **ppPluginDefinition)</td></tr>
<tr class="memdesc:ga83d05333118598c179ca6d89487fa203"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main plug-in registration method.  <a href="#ga83d05333118598c179ca6d89487fa203">More...</a><br /></td></tr>
<tr class="separator:ga83d05333118598c179ca6d89487fa203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0d356eef326f77cbb972e48946d4892"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#gae0d356eef326f77cbb972e48946d4892">GetEffectDescriptions</a> (<a class="el" href="a00087.html">AAX_ICollection</a> *inCollection)</td></tr>
<tr class="memdesc:gae0d356eef326f77cbb972e48946d4892"><td class="mdescLeft">&#160;</td><td class="mdescRight">The plug-in's static Description entrypoint.  <a href="#gae0d356eef326f77cbb972e48946d4892">More...</a><br /></td></tr>
<tr class="separator:gae0d356eef326f77cbb972e48946d4892"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga83d05333118598c179ca6d89487fa203"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> AAXRegisterPlugin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00146.html">IACFUnknown</a> *&#160;</td>
          <td class="paramname"><em>pUnkHost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IACFPluginDefinition **&#160;</td>
          <td class="paramname"><em>ppPluginDefinition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main plug-in registration method. </p>
<p>This method determines the number of components defined in the dll. The implementation of this method in the AAX library calls the following function, which must be implemented somewhere in your plug-in:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;extern AAX_Result GetEffectDescriptions( AAX_ICollection * outCollection );</div>
</div><!-- fragment --><p><em>Wrapped by <a class="el" href="a00209.html#aa455fa4d9a2236334d0fd959b4919788">ACFRegisterPlugin()</a> </em> </p>

<p>Referenced by <a class="el" href="a00209.html#aa455fa4d9a2236334d0fd959b4919788">ACFRegisterPlugin()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00326_ga83d05333118598c179ca6d89487fa203_icgraph.png" border="0" usemap="#a00326_ga83d05333118598c179ca6d89487fa203_icgraph" alt=""/></div>
<map name="a00326_ga83d05333118598c179ca6d89487fa203_icgraph" id="a00326_ga83d05333118598c179ca6d89487fa203_icgraph">
<area shape="rect" id="node2" href="a00209.html#aa455fa4d9a2236334d0fd959b4919788" title="The main plug&#45;in registration method. " alt="" coords="189,5,325,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gae0d356eef326f77cbb972e48946d4892"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> GetEffectDescriptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00087.html">AAX_ICollection</a> *&#160;</td>
          <td class="paramname"><em>inCollection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The plug-in's static Description entrypoint. </p>
<p>This function is responsible for describing an AAX plug-in to the host. It does this by populating an <a class="el" href="a00087.html" title="Interface to represent a plug-in binary&#39;s static description. ">AAX_ICollection</a> interface.</p>
<p>This function must be included in every plug-in that links to the AAX library. It is called when the host first loads the plug-in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">inCollection</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<div class="dynheader">
Collaboration diagram for Description callback:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00326.png" border="0" alt="" usemap="#a00326"/>
<map name="a00326" id="a00326">
<area shape="rect" id="node2" href="a00325.html" title="Main classes, callbacks, and format specification details for a standard AAX plug&#45;in. " alt="" coords="5,5,143,32"/></map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Fri Feb 2 2018 21:14:16 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
