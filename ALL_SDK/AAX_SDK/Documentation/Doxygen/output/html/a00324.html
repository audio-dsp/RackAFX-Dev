<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AAX SDK: Getting Started with AAX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.1</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="modules.html"><span>Manual</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Lists</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Getting Started with AAX<div class="ingroups"><a class="el" href="a00323.html">AAX SDK Manual</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>A brief introduction to AAX. </p>
<h1><a class="anchor" id="aax_getting_started_guide_contents"></a>
Contents</h1>
<ul>
<li><a class="el" href="a00324.html#aax_sdk_guide_00_introduction">Welcome</a> </li>
<li><a class="el" href="a00324.html#aax_sdk_guide_01_aax_design_overview">AAX Design Overview</a> </li>
<li><a class="el" href="a00324.html#aax_sdk_guide_02_demogain_example">DemoGain Example</a></li>
</ul>
<div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_00_introduction"></a>
Welcome</h1>
<div class="section"> Welcome to AAX! This guide is designed to introduce you to the fundamental concepts of AAX. By the end of this guide you will understand: </p><ul>
<li>The purpose of AAX </li>
<li>The basic components of an AAX plug-in </li>
<li>The structure of the DemoGain example plug-in</li>
</ul>
<p>If you would prefer to skip the documentation and jump straight to the code then we recommend jumping to <a class="el" href="a00324.html#aax_sdk_guide_02_demogain_example">DemoGain Example</a> below. This section will walk you through the core parts of and AAX plug-in using the DemoGain plug-in as an example. </div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_01_aax_design_overview"></a>
AAX Design Overview</h1>
<div class="section"></div><h2><a class="anchor" id="subsection__architecture_philosophy"></a>
Architecture Philosophy</h2>
<div class="section">The purpose of the AAX architecture is to provide an <em class="Italic">easy-to-use</em> framework for the development of <em class="Italic">high-performance audio plug-ins</em> that can run on a <em class="Italic">variety of platforms</em>, both present and future, with a <em class="Italic">high level of code re-use</em>.</div><div class="section"></div><h2><a class="anchor" id="subsection__design_attributes"></a>
Design Attributes</h2>
<div class="section">AAX incorporates a flexible, decoupled component hierarchy, including: </p><ol>
<li class="List">
A relocatable C-style callback that performs the plug-in's real-time audio processing algorithm  </li>
<li class="List">
A collection of supporting C++ objects that manage the plug-in's data, GUI, and any other non-real-time information  </li>
<li class="List">
A "description" method that statically describes the plug-in's layout and compatibility requirements to the host.  </li>
</ol>
</div><div class="section">This flexible design facilitates optimal performance and portability; AAX is 64-bit ready and is designed to work well in both host-based (Native), accelerated (DSP), and future (e.g. embedded) environments. Importantly, plug-ins running in each of these environments can use the same code base, and porting to new platforms should not require much more than a re-compile. To satisfy these portability requirements, AAX must be decoupled into three parts, the GUI, data model, and algorithm.</div><div class="section"></div><h2><a class="anchor" id="subsection__component_structure"></a>
Component Structure</h2>
<div class="section">The core component structure of an AAX plug-in involves data model, GUI, description, and algorithm modules. The design involves a mixture of C++ objects (data model and GUI modules) and C-style callbacks (algorithm and description modules.)</div><div class="section">Figure shows basic object ownership and composition in an AAX plug-in. The purple components are provided as part of the AAX SDK while the gray components are written as needed by the plug-in developer. The classes above the dotted line are pure virtual interfaces, while the classes below the dotted line are concrete implementations.</div><div class="section"><div class="image">
<img src="AAX_Design_Overview_ActualAAXInterface.png"  width="50%" alt="Core AAX interface design"/>
</div>
 <div class="imagecaption"> Figure 1: Core AAX interface design.</div></div><div class="section">As you can see, the plug-in's <a class="el" href="a00328.html">data model</a> and <a class="el" href="a00329.html">GUI</a> are written as C++ objects inherited from SDK interfaces, while its <a class="el" href="a00327.html">algorithm</a> and <a class="el" href="a00326.html">Description</a> methods are implemented as simple callbacks. This basic model may be expanded by attaching additional modules, such as the <a class="el" href="a00334.html">Host Processor</a> module used by advanced non-real-time plug-ins. In this section, however, we will be considering only the four core interfaces and modules.</div><div class="section"></div><h2><a class="anchor" id="subsection__algorithm"></a>
Algorithm</h2>
<div class="section">The most fundamental, and most important, component of any audio plug-in is its processing algorithm. Due to the design requirements of an AAX plug-in, this component must meet several constraints in order to be compatible with accelerated platforms: </p><ol>
<li class="List">
It must be possible to build the algorithm as a compatible component on a variety of platforms  </li>
<li class="List">
It must be possible for the host to re-locate the algorithm in memory without affecting the algorithm's state  </li>
<li class="List">
The algorithm must be separable from the rest of its plug-in, e.g. into a different memory space  </li>
<li class="List">
The algorithm must be as efficient as possible to call.  </li>
</ol>
</div><div class="section">To satisfy these constraints, AAX uses a decoupled C-style callback function. State information within the function is obtained through the context, a custom data structure that contains everything from the "outside world" that is relevant to the algorithm. The context includes information such as audio buffers and coefficient packets, which are provided according to a static set of data routing definitions that we will describe further in the next chapter. The host is responsible for ensuring that this structure is up-to-date whenever the algorithm callback is entered.</div><div class="section"><dl class="section see"><dt>See also</dt><dd><a class="el" href="a00327.html">Real-time algorithm callback</a></dd></dl>
</div><h2><a class="anchor" id="subsection__data_model"></a>
Data Model</h2>
<div class="section">The <a class="el" href="a00099.html">AAX_IEffectParameters</a> interface represents the data model portion of your plug-in. The AAX host interacts with your plug-in's data model via this interface, which includes methods that store and update of your plug-in's internal data.</div><div class="section">In your plug-in's data model implementation, you will be responsible for creating the plug-in's parameters and defining how the plug-in will respond when these parameters are changed via control updates or preset loads. In order for information to be routed from the data model to the plug-in's algorithm, the parameters that are created here must be registered with the host in the plug-in's Description callback (see below).</div><div class="section">The data model is composed with <a class="el" href="a00090.html">AAX_IController</a>, an interface that provides access to the host. This interface provides a means of querying information from the host such as stem format or sample rate, and is also responsible for communication between the data model and the (decoupled) algorithm.</div><div class="section">You will most likely inherit your custom data model's implementation from <a class="el" href="a00018.html">AAX_CEffectParameters</a>, a default implementation of the <a class="el" href="a00099.html">AAX_IEffectParameters</a> interface. This class provides basic functionality such as adding custom parameters, setting control values, restoring state, generating coefficients, etc., which you can override and customize as needed.</div><div class="section"> <dl class="section see"><dt>See also</dt><dd><a class="el" href="a00328.html">Data model interface</a></dd></dl>
</div><h2><a class="anchor" id="subsection__gui_interface"></a>
GUI Interface</h2>
<div class="section">The <a class="el" href="a00098.html">AAX_IEffectGUI</a> interface contains the plug-in's GUI methods. This interface is decoupled from the plug-in's data model, allowing AAX to support distributed architectures that incorporate remote GUIs.</div><div class="section">The GUI is also composed with <a class="el" href="a00090.html">AAX_IController</a>, from which references to the plug-in's other components, such as its data model interface, may be retrieved.</div><div class="section">The AAX SDK includes a set of GUI extensions to help you get started implementing your plug-ins' GUIs. These extensions include both native drawing formats and suggested integrations with third-party graphics frameworks. Although the SDK does not include any actual graphics frameworks, these extensions provide examples of how you can incorporate your chosen GUI framework with <a class="el" href="a00288.html">AAX</a>.</div><div class="section"> <dl class="section see"><dt>See also</dt><dd><a class="el" href="a00329.html">GUI interface</a></dd></dl>
</div><h2><a class="anchor" id="subsection__describe"></a>
Describe</h2>
<div class="section">A plug-in's Describe callback ties all the plug-in's components together and registers the plug-in with the host. In this callback, your plug-in defines a set of algorithm callbacks, data connections, and static plug-in properties</div><div class="section">In order to route data to the plug-in's algorithm, Describe includes a description of the algorithm's context structure. This description involves a set of port definitions, which can be "hard-wired" to receive data from the host (such as audio buffers,) from the plug-in's data model (such as packets of coefficients,) or even from past calls to the algorithm (private, persistent algorithm state.)</div><div class="section">Once these connections are made, Describe passes the host a populated description interface and returns. In the next section we will demonstrate how all these interfaces interact with one another by examining a sample plug-in.</div><div class="section"><dl class="section see"><dt>See also</dt><dd><a class="el" href="a00326.html">Description callback</a></dd></dl>
</div><h2><a class="anchor" id="subsection__controller"></a>
Controller</h2>
<div class="section">There is one additional core component to any AAX plug-in, the Controller. The plug-in does not implement this component - rather, the Controller is an interface that provides access to various facilities provided by the host, as well as to the plug-in's other modules. </div><div class="section"> </div><h1><a class="anchor" id="aax_sdk_guide_02_demogain_example"></a>
DemoGain Example</h1>
<div class="section">The AAX SDK includes a basic example plug-in named DemoGain. In this section we will examine this plug-in to show how the various core modules in an AAX plug-in interact with one another. We will focus in particular on how the DemoGain's "gain" parameter is defined, routed to the algorithm, and used to apply a gain effect to audio samples.</div><div class="section"> For a description of all the example plug-ins included in the SDK, see the <a class="el" href="a00376.html">Example Plug-Ins</a> page.</div><div class="section"></div><h2><a class="anchor" id="subsection__getting_started_with_demogain"></a>
Getting Started</h2>
<div class="section"></div><h3><a class="anchor" id="subsubsection__build_the_aax_library"></a>
Build the AAX Library</h3>
<div class="section">If this is your first time opening the AAX SDK then your first step should be to build the AAX Library project. The AAX Library is a static library containing default implementations of the AAX interface and convenience classes designed to make AAX development easy. All of the SDK example plug-ins link to this library, and your plug-ins should too.</div><div class="section">Open the AAX Library project for your chosen IDE from the Libs/AAXLibrary directory and build the library. Now you are ready to build plug-ins!</div><div class="section"></div><h3><a class="anchor" id="subsubsection__open_demogain"></a>
Open and build DemoGain</h3>
<div class="section">The DemoGain project is located in ExamplePlugIns/DemoGain. Once you have built the AAX Library project you will be able to successfully build DemoGain.</div><div class="section"><dl class="section note"><dt>Note</dt><dd>To run DemoGain or other example plug-ins in Pro Tools 10 you must change the <code>AAX_ePlugInCategory_Example</code> category to <code>AAX_ePlugInCategory_Dynamics</code> in the plug-in's Describe function. The "example" category is not supported in Pro Tools 10.</dd></dl>
<p>The DemoGain plug-in that you just built is not digitally signed, so it will only run in a developer build of Pro Tools or in another host that does not require digital signatures for AAX plug-ins. If you have a developer build of Pro Tools then you can now test the plug-in by installing it and launching Pro Tools. See <a class="el" href="a00360.html#subsection__install_directories_">Install directories</a> section in the <a class="el" href="a00360.html">Pro Tools Guide</a> document for more information about installing AAX plug-ins for Pro Tools.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__now_what"></a>
Now what?</h3>
<div class="section">A good starting point for understanding a plug-in is to understand its parameters. In DemoGain, as in most AAX plug-ins, the plug-in's parameters define its data model state, and therefore the plug-in's parameters provide the fundamental connection between user interactions and audio processing.</div><div class="section">In the remainder of this section we will examine the gain parameter in DemoGain to understand how this parameter is defined, hooked up, modified, and eventually applied to the plug-in algorithm. In this way we will "visit" each of the core design components in DemoGain.</div><div class="section"></div><h2><a class="anchor" id="subsection__overview_of_parameter_creation"></a>
Overview of Parameter Creation</h2>
<div class="section"> To create a plug-in parameter, the following steps are required: </p><ol>
<li class="List">
Data model: Create your parameter <ol>
<li class="AlphaList1st">
Create a new parameter object  </li>
<li class="AlphaList">
Register the parameter with the Packet Dispatcher  </li>
<li class="AlphaList">
Create an update callback that converts the raw parameter value into a packet of processed coefficients  </li>
</ol>
</li>
<li class="List">
Algorithm: Add new coefficients to the algorithm's context structure <ol>
<li class="AlphaList1st">
Create a new field for incoming coefficient packets  </li>
<li class="AlphaList">
Generate a <em class="Italic">field ID</em> to reference the new member  </li>
<li class="AlphaList">
Add the new coefficient to the plug-in's algorithm code  </li>
</ol>
</li>
<li class="List">
Describe: Connect the parameter throughout the plug-in <ol>
<li class="AlphaList1st">
Add a new Data Input Port to the algorithm via the component descriptor interface  </li>
<li class="AlphaList">
Add a connection between the parameter's <em class="Italic">packet ID</em> and its coefficients' <em class="Italic">field ID</em> </li>
</ol>
</li>
<li class="List">
GUI: Add a control <ol>
<li class="AlphaList1st">
Create a GUI widget that can update the parameter's state  </li>
<li class="AlphaList">
Add logic to notify the data model when the GUI is edited  </li>
<li class="AlphaList">
Add logic to update the GUI when the data model state changes  </li>
</ol>
</li>
</ol>
</div><div class="section">The following sections discuss these steps in greater detail, making use of the concrete implementation in <em class="Italic"><a class="el" href="a00018.html" title="Default implementation of the AAX_IEffectParameters interface. ">AAX_CEffectParameters</a></em>.</div><div class="section"></div><h2><a class="anchor" id="subsection__data_model_create_your_parameter"></a>
Data Model: Create Your Parameter</h2>
<div class="section">DemoGain's data model inherits its functionality from <a class="el" href="a00018.html">AAX_CEffectParameters</a> (the default implementation of <a class="el" href="a00099.html">AAX_IEffectParameters</a>). The <code>DemoGain_Parameters.h</code> and <code>DemoGain_Parameters.cpp</code> source files comprise the source code for DemoGain's data model.</div><div class="section">During plug-in initialization, <code>DemoGain_Parameters::EffectInit()</code> creates the plug-in's custom parameters. A look inside of the .cpp file shows how this is done via the creation of a new <a class="el" href="a00033.html">AAX_CParameter</a> for the gainParameter: the <a class="el" href="a00033.html">AAX_CParameter</a> constructor is parametrized with a set of arguments that define the gain parameter's behavior, such as its default value (<code>1.0f</code>), name ("Gain"), taper behavior (linear), etc.</div><div class="section">After creating the parameter objects, a series of packets are registered with the host via the inherited <a class="el" href="a00031.html">Packet Dispatcher</a>, <code>mPacketDispatcher</code>, which is a helper object used by <a class="el" href="a00018.html">AAX_CEffectParameters</a> to assist with the plug-in's packet management tasks.</div><div class="section"><div class="fragment"><div class="line">mPacketDispatcher.RegisterPacket(</div>
<div class="line">    DemoGain_GainID,</div>
<div class="line">    eAlgPortID_CoefsGainIn,</div>
<div class="line">    <span class="keyword">this</span>,</div>
<div class="line">    &amp;DemoGain_Parameters::UpdatePacket_Gain); </div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 1: Registration of DemoGain's "gain" packet handler</div></div><div class="section">The last parameter in <a class="el" href="a00031.html#a1848f0bfa473b54e9ee8e32872c89cb1">AAX_CPacketDispatcher::RegisterPacket()</a> takes a reference to a packet handler callback. This method will be called by the Packet Dispatcher whenever new parameter values need to be converted into coefficients that can be used by the algorithm. In DemoGain, a reference to DemoGain_Parameters::UpdatePacket_Gain() is used for the gain parameter's coefficient packet.</div><div class="section">As a developer, you will choose how this portion of your data model gets handled; you can choose to use the default handler method, which simply forwards the raw parameter values to the algorithm, or you can define a custom handler. You can also choose to bypass the Packet Dispatcher completely (see the <code>DemoDist_GenCoef</code> plug-in for an example of this.)</div><div class="section">Although the handling of DemoGain's gain parameter is trivial, for the sake of demonstration this plug-in uses both Packet Dispatcher approaches in the registration of its bypass and gain parameters.</div><div class="section"></div><h2><a class="anchor" id="subsection__algorithm_add_coefficients_to_the_algorithms_context_structure"></a>
Algorithm: Add coefficients to the algorithm's context structure</h2>
<div class="section"> Your plug-in's context is nothing more than a data structure of pointers that is registered with the host during Describe. These pointers function as <em class="Italic"> ports</em> where host-managed data may be delivered or retrieved.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__context_definition_"></a>
Context definition</h3>
<div class="section"></div><div class="section"> Looking under the "Component context definitions" section within DemoGain_Alg.h, you will find DemoGain's <code>SDemoGain_Alg_Context</code> context. This is DemoGain's context structure, and its sole purpose is to parametrize DemoGain's algorithm with a set of ports. Note the definition of a port for the gain coefficients that are created by <code>DemoGain_Parameters::UpdatePacket_Gain()</code> and another port for the bypass value that is forwarded via the default packet update handler.</div><div class="section"></div><div class="section"><div class="fragment"><div class="line">int32_t               * mCtrlBypassP;</div>
<div class="line">SDemoGain_CoefsGain   * mCoefsGainP; </div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 2: Gain and bypass ports in the DemoGain algorithm's context structure</div></div><div class="section">Once ports have been defined for the algorithm's coefficients and other algorithmic data, unique identifiers for each port in the context must be generated. This is accomplished through use of the <a class="el" href="a00149.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> macro. The basic idea behind this macro is to generate IDs that the host can use to directly address the ports within their context:</div><div class="section"><div class="fragment"><div class="line">, eAlgPortID_CoefsGainIn = <a class="code" href="a00149.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> ( SDemoGain_Alg_Context , mCoef ),</div>
<div class="line">, eAlgFieldID_AudioIn = <a class="code" href="a00149.html#acf807247ecd6e5899dc9dc31644e9a1d">AAX_FIELD_INDEX</a> ( SDemoGain_Alg_Context , mInputPP ) ) </div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 3: Some port ID definitions for the DemoGain algorithm's context structure</div></div><div class="section">Now the context's definition is complete. So far these are just fields in a struct; the host doesn't yet know how to route packets from the data model to these ports. That information will come later, in the plug-in's <a class="el" href="a00324.html#subsection__describe_connect_the_parameter_throughout_the_plug-in">description</a>. Once this context is described to the host, the host will know to populate it and pass it to the processing function located in DemoGain_AlgProc.cpp.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__algorithm_processing_callback_"></a>
Algorithm processing callback</h3>
<div class="section"></div><div class="section"><div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="a00149.html#aaa22112139aa627574b1ef562f579d43">AAX_CALLBACK</a></div>
<div class="line">DemoGain_AlgorithmProcessFunction (</div>
<div class="line">    SDemoGain_Alg_Context * <span class="keyword">const</span> inInstancesBegin [],</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * inInstancesEnd ) </div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 4: The DemoGain algorithm's callback prototype</div></div><div class="section">This is where the plug-in's audio buffer processing of the plug-in occurs. Note that this function is passed a pointer to an array of <code>SDemoGain_Alg_Contexts</code>. Each of these represents the state of a particular instance of DemoGain, and contains pointers to the applicable coefficient and audio buffer data.</div><div class="section">Using the <code>SDemoGain_Alg_Context</code> array, instance-specific information and audio buffers are easily retrieved for processing. DemoGain accomplishes this by first iterating over each plug-in instance, then over each channel, and finally over each sample, at which point the gain coefficient is applied to each sample in the input audio buffer and the sample data is copied to the output audio buffer:</div><div class="section"><div class="fragment"><div class="line"><span class="comment">// --------- Iterate over plug -in instances ---------//</span></div>
<div class="line"><span class="keywordflow">for</span> (SDemoGain_Alg_Context * <span class="keyword">const</span> * walk = inInstancesBegin ; walk &amp;lt;</div>
<div class="line">    inInstancesEnd ; ++ walk )</div>
<div class="line">{</div>
<div class="line">        .</div>
<div class="line">        .</div>
<div class="line">        .</div>
<div class="line">    <span class="comment">// --------- Run processing loop over each input channel ---------//</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch = 0; ch &amp;lt; kNumChannelsIn ; ch ++)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// --------- Run processing loop over each sample ---------//</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &amp;lt; kAudioWindowSize ; t++)</div>
<div class="line">        {</div>
<div class="line">                .</div>
<div class="line">                .</div>
<div class="line">                .</div>
<div class="line">        pdO [t] = gain * pdI [t];</div>
<div class="line">                .</div>
<div class="line">                .</div>
<div class="line">                .</div>
<div class="line">        } <span class="comment">// Go to the next sample</span></div>
<div class="line">    } <span class="comment">// Go to next channel</span></div>
<div class="line"> } <span class="comment">// End instance-iteration loop </span></div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 5: Iterative loops in the DemoGain algorithm</div></div><div class="section"></div><h2><a class="anchor" id="subsection__describe_connect_the_parameter_throughout_the_plug-in"></a>
Describe: Connect the parameter throughout the plug-in</h2>
<div class="section"> As mentioned before, Describe provides a static description of all communication pathways between a plug-in's algorithm, host, and data model. In addition, various effect properties are defined that help the host determine how to handle the plug-in.</div><div class="section">Communication paths between the various plug-in components are described as connections between source and destination ports. In order for these communication paths to be created, the algorithm must first define some destination ports by actually registering its previously defined context fields as communication destinations. DemoGain does this for its gain parameter through the following call to <a class="el" href="a00088.html#a230293b9f6bb413626cd487ca501df75">AAX_IComponentDescriptor::AddDataInPort()</a> in DemoGain_Describe.cpp's <code>DescribeAlgorithmComponent()</code> method:</div><div class="section"><div class="fragment"><div class="line"><a class="code" href="a00088.html">AAX_IComponentDescriptor</a> * compDesc;</div>
<div class="line">compDesc = outDescriptor-&gt;NewComponentDescriptor ();</div>
<div class="line">err = compDesc-&gt;<a class="code" href="a00088.html#a230293b9f6bb413626cd487ca501df75">AddDataInPort</a> (</div>
<div class="line">    eAlgPortID_CoefsGainIn ,</div>
<div class="line">    <span class="keyword">sizeof</span> (SDemoGain_CoefsGain) ); </div>
</div><!-- fragment --> <div class="fragmentcaption"> Listing 6: Adding a data port to DemoGain's algorithm component descriptor</div></div><div class="section">This registration process is required for both custom coefficients (Gain) and for data that all plug-ins need such as audio input and output fields.</div><div class="section">That completes the connection, and now the plug-in is fully wired to receive parameter updates, convert raw parameter values to algorithmic coefficients, pack these coefficients into a packet, post the packet to the host for routing, receive the updated packet in the list of context structures that the host provides when calling the algorithm callback, and apply the updated coefficient data in the appropriate context structure to the plug-in's audio data. Whew! </div><h2><a class="anchor" id="subsection__gui_add_a_control"></a>
GUI: Add a control</h2>
<div class="section"> Although the specific steps for adding a GUI control to edit a plug-in parameter will vary depending on the GUI framework you choose, there are a few basic design principles that should always be followed.</div><div class="section">The basic DemoGain plug-in does not include any GUI implementation. For practical GUI implementation examples, open the DemoGain_GUIExtensions sample plug-ins. DemoGain_Cocoa provides an example of a custom plug-in GUI using the native OS X SDK, while DemoGain_Win32 uses native Windows APIs. The other examples in this folder require common third-party libraries.</div><div class="section"></div><h3><a class="anchor" id="subsubsection__control_edits_vs_parameter_updates_"></a>
Control edits vs. parameter updates</h3>
<div class="section"> The most important principle for AAX GUI design is that an edit in a plug-in's GUI should never directly set the state of the associated parameter or parameters. This is because there may be other controller clients of the plug-in's data model which will need to be notified of the edit, or which may need to override edits from the GUI. </p><ul class="paragraphs">
<li>
<div class="SectionHead"> On control edit</div><p class="endli">When a control is edited in the plug-in GUI, call <a class="el" href="a00061.html#a368b0f5a761d1eda4c41b420f153a077">AAX_IEffectParameters::SetParameterNormalizedValue()</a>. The implementation of this method should post a request to the host in order to trigger the parameter update. The GUI should not update its state until the corresponding parameter update notification is received.  </p>
</li>
<li>
<div class="SectionHead"> On parameter update</div><p class="endli">A parameter update can occur in response to a GUI edit, an edit from another attached controller, an update to a linked parameter, or any other event that affects the state of the data model. When the state of a parameter changes, <a class="el" href="a00060.html#a45b468fef806611581f748af9301ab4d">AAX_IEffectGUI::ParameterUpdated()</a> is called. The plug-in's GUI should be updated in this method in order to reflect the new state of the affected parameter.  </p>
</li>
</ul>
</div><div class="section">For detailed information about the sequence of events and GUI responsibilities during a parameter update, see <a class="el" href="a00350.html">Parameter updates</a></div><div class="section"></div><h3><a class="anchor" id="subsubsection__notifying_the_host_of_gui_events_"></a>
Notifying the host of GUI events</h3>
<div class="section"> Some GUI events must be handled by the host rather than by the plug-in. For example, in Pro Tools a user should be able to display a pop-up menu for controlling automation information by command-option-control-clicking (Mac) or alt-ctl-right clicking (Windows) a control. These events, and other direct communication between the GUI and the "container" in which the host creates the plug-in view, is accomplished via the <a class="el" href="a00117.html">AAX_IViewContainer</a> interface. Be sure to always call the handler methods in this interface before handling a mouse event within the plug-in GUI, in order to maintain the expected host behavior.</div><div class="section"></div> <div class="dynheader">
Collaboration diagram for Getting Started with AAX:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00324.png" border="0" alt="" usemap="#a00324"/>
<map name="a00324" id="a00324">
<area shape="rect" id="node1" href="a00323.html" title="AAX SDK Manual" alt="" coords="5,5,132,32"/></map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Fri Feb 2 2018 21:14:00 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
