<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AAX SDK: Plug-in meters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.1</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="modules.html"><span>Manual</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Lists</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Plug-in meters<div class="ingroups"><a class="el" href="a00323.html">AAX SDK Manual</a> &raquo; <a class="el" href="a00332.html">Additional AAX features</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>How to manage metering data for AAX plug-ins. </p>
<h1><a class="anchor" id="AdditionalFeatures_Meters_overview"></a>
Overview of metering in AAX</h1>
<p>AAX provides a host-managed metering system for plug-ins. The host buffers, thins, and applies ballistics to each of the plug-in's meters. When the plug-in GUI retrieves this processed data, it receives the exact same information that is displayed on control surfaces and other metering devices.</p>
<h1><a class="anchor" id="AdditionalFeatures_Meters_adding"></a>
Adding meters to an Effect</h1>
<p>Meters are added to an algorithm Component in <a class="el" href="a00326.html">Describe</a> using <a class="el" href="a00088.html#a5e4a61afa3d6510891e16d7179bdaa64">AAX_IComponentDescriptor::AddMeters()</a>. The resulting meter context field will be populated with an array of meter "tap" values, one for each of the Component's meters.</p>
<h2><a class="anchor" id="AdditionalFeatures_Meters_adding_properties"></a>
Customizing meter behavior</h2>
<p>Using the <a class="el" href="a00096.html">Effect Descriptor</a>, each meter in the Effect may optionally be associated with a <a class="el" href="a00112.html">property map</a> that applies a particular set of display properties to the meter. These are the properties that may be set on a meter:</p>
<ul>
<li><a class="el" href="a00206.html#af260f0f9a6bff0f7bfd3200b2947c96b">AAX_EMeterOrientation</a> </li>
<li><a class="el" href="a00206.html#a9aaedbe356691c4e4584fa7ccdbcc776">AAX_EMeterBallisticType</a> </li>
<li><a class="el" href="a00206.html#a590815545eaf0d3be0bb8f656fe2a761">AAX_EMeterType</a></li>
</ul>
<p>Note that, because meter properties are added at the Effect level, it is not possible to describe different meter property configurations for different algorithms in the same Effect.</p>
<h1><a class="anchor" id="AdditionalFeatures_Meters_reporting"></a>
Reporting meter values</h1>
<p>Meter values are reported by the algorithm using one "tap" per channel per buffer. For each tap, the algorithm must report the maximum metered sample value for each processing buffer.</p>
<p>Meter tap values can be interpreted as the maximum value of the meter per buffer, on a scale of [0.0 1.0]. In all cases the plug-in's meter position should be normalized between 0 and 1, where 0 is no gain reduction. For example:</p>
<ul>
<li>An input meter should report the maximum absolute sample value that is present in the input audio buffer for the appropriate channel </li>
<li>An output meter should report the maximum absolute sample value that is present in the output audio buffer for the appropriate channel </li>
<li>A gain-reduction meter (CL or EG types) should report the largest amount of gain reduction in the current buffer for the appropriate channel. If no gain reduction occurred for a buffer then a value of 0.0 should be reported. If a full-scale signal was reduced to silence then a value of 1.0 should be reported.</li>
</ul>
<p>Gain-reduction meter values should report peak gain reduction, not RMS or other algorithms, and may use any normalization mapping (e.g. linear, exponential) which is desired. Ideally the gain-reduction metering UI in the host and on attached control surfaces will match the Peak gain redution metering in the plug-in's GUI.</p>
<dl class="porting_notes"><dt><b><a class="el" href="a00384.html#_porting_notes000001">Legacy Porting Notes:</a></b></dt><dd>The gain-reduction meter handling for AAX plug-ins is different from that for RTAS/TDM plug-ins. AAX plug-ins must invert their gain-reduction meter values manually before reporting these values from the audio processing callback. The AAX host will always thin reported meter data using a "max" operation, and will later invert gain-reduction meter values before they are available to the plug-in GUI or to control surfaces. </dd></dl>
<h1><a class="anchor" id="AdditionalFeatures_Meters_displaying"></a>
Displaying meter values</h1>
<p>The meter values that are reported to the system from the algorithm are available, in buffered and (optionally) ballistics-smoothed form, from <a class="el" href="a00090.html">AAX_IController</a> . The meter values returned from methods such as <a class="el" href="a00090.html#a13de9cc4bb7fb3848fbe12622c033135">GetCurrentMeterValue()</a> and <a class="el" href="a00090.html#a85db3824256005c97689925750103765">GetMeterPeakValue()</a> are the same values used by the system when displaying plug-in meters on control surfaces, and when a plug-in clears the peak value using <a class="el" href="a00090.html#aa8fe057d2f53109e75662da0a492fa34">ClearMeterPeakValue()</a> this change will likewise be reflected throughout the system.</p>
<p>The literal values provided by these methods can be interpreted as the distance from "rest" that the meter must travel to represent the current value, again on a scale of [0.0 1.0]. Note that this is not necessarily equivalent to the semantics of the meter's reported values in the algorithm:</p>
<ul>
<li>For "standard" meters such as input meters, this corresponds to the value provided by the algorithm, since a maximum metered sample value (1.0) corresponds to a meter that should be drawn "furthest from rest" (1.0), i.e. at the top of a standard bottom-to-top meter graphic, or at the far right of a standard left-to-right graphic. </li>
<li>For "inverted" meters, such as gain-reduction meters, these semantics are reversed: a maximum metered sample value (1.0) corresponds to a meter drawn "at rest" (0.0), i.e. at the bottom of a bottom-to-top meter graphic or at the far left of a left-to-right graphic.</li>
</ul>
<p>These values are independent of <a class="el" href="a00206.html#af260f0f9a6bff0f7bfd3200b2947c96b">meter orientation</a>: an input or output meter that is oriented with <a class="el" href="a00206.html#af260f0f9a6bff0f7bfd3200b2947c96ba0b672f16509ea26e7374306bbb2e1e07">AAX_eMeterOrientation_TopRight</a> will still use 0.0 as its "at rest" position, and likewise a gain-reduction meter that is oriented with <a class="el" href="a00206.html#af260f0f9a6bff0f7bfd3200b2947c96bad6b506082c761babe2cefe133d326e32">AAX_eMeterOrientation_BottomLeft</a> will still use 1.0.</p>
<h1><a class="anchor" id="AdditionalFeatures_Meters_alternatives"></a>
Alternatives</h1>
<p>For advanced metering applications a single tap value may not be sufficient. To transmit more detailed information from the algorithm to its other components, a plug-in must use the <a class="el" href="a00333.html">Direct Data</a> interface. </p>
<div class="dynheader">
Collaboration diagram for Plug-in meters:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00337.png" border="0" alt="" usemap="#a00337"/>
<map name="a00337" id="a00337">
<area shape="rect" id="node1" href="a00332.html" title="How to use additional features and functionality supported by AAX. " alt="" coords="5,5,168,32"/></map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Fri Feb 2 2018 21:14:32 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
