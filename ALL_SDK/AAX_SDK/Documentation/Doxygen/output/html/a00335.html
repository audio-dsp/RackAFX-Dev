<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AAX SDK: Hybrid Processing architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.1</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="modules.html"><span>Manual</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Lists</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Hybrid Processing architecture<div class="ingroups"><a class="el" href="a00323.html">AAX SDK Manual</a> &raquo; <a class="el" href="a00332.html">Additional AAX features</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader"> </h2>
<p>An architecture combining low-latency and high-latency audio processing. </p>
<div class="image">
<img src="AAX_Hybrid.png" alt="AAX_Hybrid.png"/>
</div>
 <h1><a class="anchor" id="additionalFeatures_Hybrid_overview"></a>
Overview of Hybrid</h1>
<p>Hybrid processing is an optional feature that allows a single plug-in to simultaneously render data on the host's low- and high-latency signal networks. In many large plug-ins this can be very useful. For example, consider a reverb algorithm with both early reflection and tail processing. With AAX Hybrid, this plug-in can process the early reflections at low latency while allowing the tail algorithm to be handled at higher latency (and thus higher efficiency.) Other kinds of algorithms that could benefit from Hybrid processing are noise reductions, analyzers, multi-effect suites, and instruments.</p>
<p>Because the low-latency AAX signal network may be run on DSP hardware, AAX DSP plug-ins that incorporate Hybrid processing can split audio processing between the DSP and the host. This provides the benefits of low latency, highly deterministic DSP-based processing while also allowing the plug-in to leverage the high-latency power of the Intel core where appropriate.</p>
<p>AAX Hybrid is an internal feature and is not exposed to users, except in terms of better plug-in performance and more efficient DSP usage.</p>
<dl class="section note"><dt>Note</dt><dd>AAX Hybrid may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</dd></dl>
<h1><a class="anchor" id="additionalFeatures_Hybrid_adding"></a>
Implementing Hybrid processing</h1>
<p><em>For an example of Hybrid processing, see the <a class="el" href="a00376.html#DemoDelay_Hybrid">DemoDelay_Hybrid</a> example plug-in</em></p>
<p>To register for Hybrid processing, a plug-in should add values for <a class="el" href="a00335.html#ga6571f4e41a5dd06e4067249228e2249ea33a950bc2e02d38fc3be0a0ad8cc89b1">AAX_eProperty_HybridInputStemFormat</a> and <a class="el" href="a00335.html#ga6571f4e41a5dd06e4067249228e2249eac30a4e73772e37267dfef39ae3122705">AAX_eProperty_HybridOutputStemFormat</a> to the associated ProcessProc property map. Once these values have been registered, both the ProcessProc callback and the Hybrid render function in the plug-in's data model will be invoked during processing.</p>
<p>Hybrid processing context information is provided via a dedicated <a class="el" href="a00121.html">Hybrid processing context structure</a>. It is not possible to register additional fields on this context. However, unlike a normal algorithm ProcessProc, the Hybrid render method is implemented directly within the plug-in's effect parameters object and has direct access to the data model memory. This is possible since the render method will always run on the host, and makes it easier to implement algorithms that require access to the data model, e.g. for direct access to impulse responses, etc.</p>
<p>The AAX host provides dedicated audio buffers in both the ProcessProc context and the Hybrid processing context. These buffers can be used to pass audio data between the low-latency ProcesProc and the Hybrid render contexts. </p><ul>
<li>The plug-in may pass output from the low-latency ProcessProc to the Hybrid render method using additional audio buffers that are added at the end of the ProcessProc context's normal output buffer array. The ProcessProc may perform any pre-processing that is desired before passing audio to the Hybrid render context via these buffers. The <a class="el" href="a00335.html#ga6571f4e41a5dd06e4067249228e2249eac30a4e73772e37267dfef39ae3122705">AAX_eProperty_HybridOutputStemFormat</a> property defines how many buffers will be sent from the ProcessProc to the Hybrid render method. </li>
<li>Similarly, the plug-in may pass samples from the Hybrid processing callback to the low-latency ProcessProc using additional audio buffers that are added at the end of the ProcessProc context's normal input buffer array. The <a class="el" href="a00335.html#ga6571f4e41a5dd06e4067249228e2249ea33a950bc2e02d38fc3be0a0ad8cc89b1">AAX_eProperty_HybridInputStemFormat</a> property defines how many buffers will be sent from the Hybrid render method to the ProcessProc.</li>
</ul>
<p>Samples which are sent from the ProcessProc to the Hybrid processing callback and back to the ProcessProc are delayed by a fixed amount relative to the normal input samples that are processed directly by the ProcessProc to its output buffers. The number of samples of delay that are added in this round-trip is available to the plug-in via <a class="el" href="a00335.html#ga47b471c438fcad0798964b860d74609e">AAX_IController::GetHybridSignalLatency()</a> .</p>
<h1><a class="anchor" id="additionalFeatures_Hybrid_subtleties"></a>
Additional information</h1>
<h2><a class="anchor" id="additionalFeatures_Hybrid_parametertiming"></a>
Parameter update timing</h2>
<p>Because updates are not passed to the <a class="el" href="a00121.html">Hybrid processing context</a> using the normal AAX port infrastructure, any parameter updates from automation will be reflected in this context a little bit ahead of time (~21 ms at 44.1 kHz.) See the <a class="el" href="a00351.html">Parameter update timing</a> page for a discussion of parameter timing accuracy and some suggestions of how you can maintain accurate parameter update timing.</p>
<h2><a class="anchor" id="additionalFeatures_Hybrid_hostsupport"></a>
Host support and alternatives</h2>
<p>Not all <a class="el" href="a00288.html">AAX</a> hosts support <a class="el" href="a00288.html">AAX</a> Hybrid processing. See the <a class="el" href="a00373.html">Host Support</a> page for additional information.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a00333.html" title="A host interface providing direct access to a plug-in&#39;s algorithm memory. ">Direct data access interface</a> for another approach for transferring non-audio data between the algorithm callback and the plug-in's data model. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html">AAX_SHybridRenderInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hybrid render processing context.  <a href="a00121.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga47b471c438fcad0798964b860d74609e"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00335.html#ga47b471c438fcad0798964b860d74609e">AAX_IController::GetHybridSignalLatency</a> (int32_t *outSamples) const =0</td></tr>
<tr class="memdesc:ga47b471c438fcad0798964b860d74609e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CALL: Returns the latency between the algorithm normal input samples and the inputs returning from the hyrbid component.  <a href="#ga47b471c438fcad0798964b860d74609e">More...</a><br /></td></tr>
<tr class="separator:ga47b471c438fcad0798964b860d74609e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Hybrid audio methods</h2></td></tr>
<tr class="memitem:gae6139041de22f51f3146d26a01c54c1b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00335.html#gae6139041de22f51f3146d26a01c54c1b">AAX_IACFEffectParameters_V2::RenderAudio_Hybrid</a> (<a class="el" href="a00121.html">AAX_SHybridRenderInfo</a> *ioRenderInfo)=0</td></tr>
<tr class="memdesc:gae6139041de22f51f3146d26a01c54c1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hybrid audio render function.  <a href="#gae6139041de22f51f3146d26a01c54c1b">More...</a><br /></td></tr>
<tr class="separator:gae6139041de22f51f3146d26a01c54c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae6139041de22f51f3146d26a01c54c1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> AAX_IACFEffectParameters_V2::RenderAudio_Hybrid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00121.html">AAX_SHybridRenderInfo</a> *&#160;</td>
          <td class="paramname"><em>ioRenderInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hybrid audio render function. </p>
<p>This method is called from the host to render audio for the hybrid piece of the algorithm.</p>
<dl class="section note"><dt>Note</dt><dd>To use this method plug-in should register some hybrid inputs and ouputs in "Describe" </dd></dl>

<p>Implemented in <a class="el" href="a00018.html#a70c1cf315915535cb593860ed42b6cbe">AAX_CEffectParameters</a>.</p>

</div>
</div>
<a class="anchor" id="ga47b471c438fcad0798964b860d74609e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a00149.html#a4d8f69a697df7f70c3a8e9b8ee130d2f">AAX_Result</a> AAX_IController::GetHybridSignalLatency </td>
          <td>(</td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>outSamples</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CALL: Returns the latency between the algorithm normal input samples and the inputs returning from the hyrbid component. </p>
<p>This method provides the number of samples that the AAX host expects the plug-in to delay a signal. The host will use this value when accounting for latency across the system.</p>
<dl class="section note"><dt>Note</dt><dd>This value will generally scale up with sample rate, although it's not a simple multiple due to some fixed overhead. This value will be fixed for any given sample rate regardless of other buffer size settings in the host app.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">outSamples</td><td>The number of samples of hybrid signal delay </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="a00132.html#abd2f38749bd13d2cf54b79d007dd993f">AAX_VController</a>.</p>

</div>
</div>
<div class="dynheader">
Collaboration diagram for Hybrid Processing architecture:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00335.png" border="0" alt="" usemap="#a00335"/>
<map name="a00335" id="a00335">
<area shape="rect" id="node1" href="a00332.html" title="How to use additional features and functionality supported by AAX. " alt="" coords="5,5,168,32"/></map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Fri Feb 2 2018 21:14:32 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
