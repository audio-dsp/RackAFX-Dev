<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AAX SDK: AAX communication protocols</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="aaxdoxy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cw_105x65_aax_buf.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AAX SDK
   &#160;<span id="projectnumber">2.3.1</span>
   </div>
   <div id="projectbrief">Avid Audio Extensions Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="modules.html"><span>Manual</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Lists</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AAX communication protocols<div class="ingroups"><a class="el" href="a00323.html">AAX SDK Manual</a> &raquo; <a class="el" href="a00325.html">Core AAX Interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>How to transfer data between different parts of an AAX plug-in. </p>
<p>AAX is a highly modular architecture. This section describes the various means by which AAX plug-in modules may communicate with one another and with the host.</p>
<p>There are two fundamental categories of communication in <a class="el" href="a00288.html">AAX</a>:</p><ol type="1">
<li><a class="el" href="a00330.html#CommonInterface_Communication_hostmodules">Communication with the C++ interface objects</a></li>
<li><a class="el" href="a00330.html#CommonInterface_Communication_algorithm">Communication with the real-time algorithm</a></li>
</ol>
<h1><a class="anchor" id="CommonInterface_Communication_hostmodules"></a>
Communication with the C++ interface objects</h1>
<h2><a class="anchor" id="CommonInterface_Communication_hostmodules_controller"></a>
Direct host communication</h2>
<p>Most communication between the AAX host and the plug-in is accomplished via the <a class="el" href="a00090.html">AAX_IController</a> interface. This interface contains methods for such things as:</p><ul>
<li>Retrieving environment information such as the current <a class="el" href="a00090.html#afa1f9f64eeeab9570e5599f466fa699e">sample rate</a></li>
<li>Getting and setting Effect parameters such as the Effect's <a class="el" href="a00090.html#ad50aa6fd54e39623a58debd63d9551e1">algorithmic delay</a></li>
<li>Accessing host-managed information such as <a class="el" href="a00337.html">Plug-in meters</a> and MIDI</li>
<li>Accessing other host-managed communications protocols like <a class="el" href="a00330.html#CommonInterface_Communication_algorithm_datapackets">Data packets</a> and MIDI</li>
</ul>
<p>In addition, the GUI uses a separate interface for managing view and event details with the host. This interface, <a class="el" href="a00117.html">AAX_IViewContainer</a>, includes methods for:</p><ul>
<li>Retrieving information like the raw view and the currently held modifier keys</li>
<li>Requesting changes to view parameters (e.g. size)</li>
<li>Passing GUI events on to the host.<ul>
<li>This is an important function because the host may require its own specific behavior for certain events. For example, a command-control-option click in Pro Tools should bring up the parameter's automation menu.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="CommonInterface_Communication_hostmodules_customdata"></a>
Custom data blocks</h2>
<p>Often it is necessary to transmit arbitrary blocks of custom plug-in data between different plug-in modules. In AAX, this is accomplished by "pushing" data to and "pulling" it from the plug-in's <a class="el" href="a00328.html">data model</a>.</p>
<p>The abstract data model interface includes two custom data methods for this: </p><ul>
<li><a class="el" href="a00061.html#a4728fcad006d921a07489144360f447e">AAX_IEffectParameters::GetCustomData()</a> </li>
<li><a class="el" href="a00061.html#aa838cad04781853ef2e0b9df22a05170">AAX_IEffectParameters::SetCustomData()</a></li>
</ul>
<p>It is the data model's job to act as a go-between when custom data must be transmitted between a plug-in's other modules.</p>
<p>For example, a plug-in may wish to send analysis data from its <a class="el" href="a00333.html">direct data module</a> to its <a class="el" href="a00329.html">GUI</a>. In this situation, the Direct Data object would call <a class="el" href="a00061.html#aa838cad04781853ef2e0b9df22a05170">SetCustomData()</a> to update the data model whenever new data was available, while the GUI would "pull" the most up-to-date data via <a class="el" href="a00061.html#a4728fcad006d921a07489144360f447e">GetCustomData()</a> whenever an update was required.</p>
<p>Note that the default implementations of these methods are empty and thus all implementation details, including thread safety guards, are left to the plug-in.</p>
<h2><a class="anchor" id="CommonInterface_Communication_hostmodules_notifications"></a>
Notifications</h2>
<p>The <a class="el" href="a00328.html">data model</a> and <a class="el" href="a00329.html">GUI</a> interfaces include <a class="el" href="a00061.html#aa3eaeb292d2ca84086a5a058171994fd">notification hook</a> methods. These methods used for <a class="el" href="a00206.html#afab5ea2cfd731fc8f163b6caa685406e">host-to-Effect notifications</a> by default, but may also be called with custom notification IDs in order to create custom notifications within a plug-in.</p>
<h2><a class="anchor" id="CommonInterface_Communication_hostmodules_directpointersharing"></a>
Direct pointer sharing</h2>
<p>If co-location is guaranteed, plug-in modules may directly share data pointers. For example, a non-real-time plug-in's <a class="el" href="a00334.html">Host Processor</a> object may share a <code>this</code> pointer with its <a class="el" href="a00328.html">data model</a> object.</p>
<p>To guarantee co-location between modules that could normally be placed into different memory spaces by the host, use "constraint" properties:</p>
<ul>
<li><a class="el" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea79a0815fea6c8f1a0d8ed511aa88e9ff">AAX_eProperty_Constraint_Location</a> </li>
<li><a class="el" href="a00283.html#a6571f4e41a5dd06e4067249228e2249ea5d7fca796aba48b5dc364af0cc633a02">AAX_eProperty_Constraint_Topology</a></li>
</ul>
<p>To help avoid forwards-compatibility issues with future devices that support AAX, these constraints should be set whenever a plug-in requires co-location of its components. Note, however, that using a design that relies on co-location will prevent the plug-in from running in distributed environments and should therefore be avoided when possible.</p>
<h1><a class="anchor" id="CommonInterface_Communication_algorithm"></a>
Communication with the real-time algorithm</h1>
<p>An AAX plug-in's algorithm is essentially a stateless callback and, therefore, all of its state data must at some level be managed by the host. This model is fundamentally different from the other plug-in modules, which are each objects with their own memory and state.</p>
<p>Most algorithmic data management is performed via the algorithm's context structure. More information about memory management in AAX real-time algorithms can be found <a class="el" href="a00327.html#alg_memmgmt">here</a>.</p>
<h2><a class="anchor" id="CommonInterface_Communication_algorithm_datapackets"></a>
Data packets</h2>
<p>The most common form of communication with a plug-in's real-time algorithm callback is the transmission of read-only data from the data model to the context structure.</p>
<p>AAX includes a dedicated API for this task that provides buffered, optimized delivery of read-only data packets to the algorithm. For more information, see <a class="el" href="a00327.html#alg_comm">Communicating with the algorithm</a> .</p>
<h2><a class="anchor" id="CommonInterface_Communication_algorithm_fields"></a>
Host-managed context fields</h2>
<p>Algorithms can also send data to the host and receive environment information through dedicated context fields. For example, the host can provide access to DMA facilities through an object accessed via a DMA field, and a plug-in can report meter values to the host via a dedicated meter field. For more information, see <a class="el" href="a00327.html#alg_comm">Communicating with the algorithm</a> .</p>
<h2><a class="anchor" id="CommonInterface_Communication_algorithm_directdata"></a>
Direct data transfers</h2>
<p>When other modules in the plug-in must interact directly with the algorithm's state information this is accomplished via the <a class="el" href="a00333.html">Direct Data</a> interface. This interface provides an idle-time context in which the plug-in may read from or write to the algorithm's private data memory. These transfers are unbuffered and therefore the plug-in must handle any appropriate thread-safety considerations. </p>
<div class="dynheader">
Collaboration diagram for AAX communication protocols:</div>
<div class="dyncontent">
<center><table><tr><td><img src="a00330.png" border="0" alt="" usemap="#a00330"/>
<map name="a00330" id="a00330">
<area shape="rect" id="node1" href="a00325.html" title="Main classes, callbacks, and format specification details for a standard AAX plug&#45;in. " alt="" coords="5,5,143,32"/></map>
</td></tr></table></center>
</div>
</div><!-- contents -->
<!--        Copyright 2016, 2018 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<div class="FooterLegal">This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.</div>
Generated on Fri Feb 2 2018 21:14:32 for AAX SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
